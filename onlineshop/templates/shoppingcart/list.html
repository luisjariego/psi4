{% extends 'shop/base.html' %}

{% load staticfiles %}

{% block title %} ShoppingCart {% endblock %}

{% block main %} {% endblock %}

{% block body_block %}
	<h1>Your shopping cart</h1>
	<table class="cart">
		<thead>
			<tr>
				<th>Image</th>
				<th>Product</th>
				<th>Quantity</th>
				<th>Remove</th>
				<th>Unit price</th>
				<th>Price</th>
			</tr>
		</thead>
		<tbody>
			{% for key, value in shoppingcart.cart.items %}
			<tr>
				<td>
					<a href="{% url 'product_detail' value.product.id value.product.prodSlug%}">
						<img src="{{value.product.image.url}}"/>
					</a>
				</td>
				<td><a href="{% url 'product_detail' value.product.id value.product.prodSlug%}">{{ value.prodName }}</a></td>
				<td>
					<strong> {{ value.units}} items </strong>
					<form method="post" action="{% url 'shoppingcart_update' value.product.id %}">
						{% csrf_token %}
					        {% for hidden in form.hidden_fields %}
					            {{ hidden }}
					        {% endfor %}
					        {% for field in form.visible_fields %}
					            {{ field.errors }}
					            {{ field.help_text }}
					            {{ field }}
					        {% endfor %}
						<input type="submit" name="submit" class="btn btn-secondary" value="Update"/>
					</form>
				</td>
				<td><a class="btn btn-secondary" id="Remove" href="{% url 'shoppingcart_remove' value.product.id %}">Remove</a></td>
				<td>{{ value.price}}</td>
				<td>{{ value.total_price}}</td>
			</tr>
			{% endfor %}
			<tr class="total">
				<td>Total</td>
				<td colspan="4"></td>
				<td class="num">{{shoppingcart.get_total_price}}â‚¬</td>
			</tr>
		</tbody>
	</table>
	<a class="btn" href="{% url 'product_list' %}">Continue shopping</a>
	<a class="btn btn-secondary" href= "{% url 'create_order' %}"> Checkout</a>


{% endblock %}
